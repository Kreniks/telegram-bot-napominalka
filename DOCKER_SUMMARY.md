# üê≥ DOCKER –ö–û–ù–¢–ï–ô–ù–ï–† - –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê

## ‚úÖ –ß–¢–û –°–û–ó–î–ê–ù–û

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è Telegram-–±–æ—Ç–∞ "–ù–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞" —Å production-ready –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏.

---

## üì¶ DOCKER –§–ê–ô–õ–´

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ Dockerfile
1. **`Dockerfile`** - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–∑ —Å –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–æ–π —Å–±–æ—Ä–∫–æ–π
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
   - Health check
   - –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –û–º—Å–∫–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

2. **`Dockerfile.production`** - Production-ready –≤–µ—Ä—Å–∏—è
   - Supervisor –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
   - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
   - Graceful shutdown
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ backup
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

### üîÑ Docker Compose
1. **`docker-compose.yml`** - –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   - –û–±—ã—á–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–æ—Ç–∞
   - Production –≤–µ—Ä—Å–∏—è —Å –ø—Ä–æ—Ñ–∏–ª–µ–º
   - Health check
   - –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ volumes
   - –°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

2. **`docker-compose.dev.yml`** - –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
   - Hot reload
   - Debugger (–ø–æ—Ä—Ç 5678)
   - Nginx –ø—Ä–æ–∫—Å–∏
   - Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤

### üõ†Ô∏è –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
1. **`docker-entrypoint.sh`** - –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –°–æ–∑–¥–∞–Ω–∏–µ backup

2. **`supervisord.conf`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è supervisor
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
   - Health check —Å–µ—Ä–≤–µ—Ä
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

3. **`nginx.dev.conf`** - Nginx –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
   - –ü—Ä–æ–∫—Å–∏ –¥–ª—è health check
   - Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç–∞—Ç—É—Å–∞
   - –ú–µ—Ç—Ä–∏–∫–∏

4. **`Makefile`** - –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - 20+ –∫–æ–º–∞–Ω–¥ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á

---

## üöÄ –°–ü–û–°–û–ë–´ –ó–ê–ü–£–°–ö–ê

### 1. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞
cp .env.example .env
# –î–æ–±–∞–≤–∏—Ç—å BOT_TOKEN –≤ .env

# –ó–∞–ø—É—Å–∫
make up
```

### 2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
make dev
# –î–æ—Å—Ç—É–ø–Ω–æ:
# - Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: http://localhost
# - Health check: http://localhost:8080/health
# - Debugger: –ø–æ—Ä—Ç 5678
```

### 3. Production
```bash
make prod
# –í–∫–ª—é—á–∞–µ—Ç:
# - Supervisor
# - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ backup
# - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
# - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
make test        # –û–±—ã—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
make dev-test    # –¢–µ—Å—Ç—ã –≤ dev —Ä–µ–∂–∏–º–µ
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –£–ü–†–ê–í–õ–ï–ù–ò–ï

### Health Check
- **Endpoint:** `http://localhost:8080/health`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **–°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –≤ Docker

### –ú–µ—Ç—Ä–∏–∫–∏
- **Endpoint:** `http://localhost:8080/metrics`
- **–î–∞–Ω–Ω—ã–µ:** –∞–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** —á–µ—Ä–µ–∑ `make monitor`

### –õ–æ–≥–∏
```bash
make logs        # –í—Å–µ –ª–æ–≥–∏
make dev-logs    # Dev –ª–æ–≥–∏
make prod-logs   # Production –ª–æ–≥–∏
```

### Backup
```bash
make backup      # –†—É—á–Ω–æ–π backup
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤ production
```

---

## ‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (98 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
BOT_TOKEN=your_token

# –û—Å–Ω–æ–≤–Ω—ã–µ
LOG_LEVEL=INFO
CHECK_INTERVAL_SECONDS=60
HEALTH_CHECK_ENABLED=true

# –†–µ–∂–∏–º—ã
RUN_MODE=normal          # normal, advanced, monitor, test
CREATE_BACKUP=false
LOG_TO_STDOUT=true
```

### Volumes
- **`bot_data`** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **`bot_logs`** - –õ–æ–≥–∏
- **`bot_backups`** - Backup —Ñ–∞–π–ª—ã

### –°–µ—Ç–∏
- **`bot_network`** - –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä
- ‚úÖ –ù–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (UID 1000)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏—à–Ω–∏—Ö –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ –°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è

### –î–∞–Ω–Ω—ã–µ
- ‚úÖ Volumes –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ backup
- ‚úÖ –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤

---

## üìà –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
```yaml
# –û–±—ã—á–Ω–∞—è –≤–µ—Ä—Å–∏—è
limits:
  memory: 256M
  cpus: '0.5'

# Production –≤–µ—Ä—Å–∏—è
limits:
  memory: 512M
  cpus: '1.0'
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ Docker
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–µ–≤
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

---

## üõ†Ô∏è MAKEFILE –ö–û–ú–ê–ù–î–´

### –û—Å–Ω–æ–≤–Ω—ã–µ
```bash
make help        # –°–ø—Ä–∞–≤–∫–∞
make build       # –°–±–æ—Ä–∫–∞
make up          # –ó–∞–ø—É—Å–∫
make down        # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
make logs        # –õ–æ–≥–∏
make status      # –°—Ç–∞—Ç—É—Å
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
make dev         # Dev —Ä–µ–∂–∏–º
make dev-test    # Dev —Ç–µ—Å—Ç—ã
make dev-logs    # Dev –ª–æ–≥–∏
make dev-down    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ dev
```

### Production
```bash
make prod        # Production
make prod-logs   # Production –ª–æ–≥–∏
make prod-down   # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ production
```

### –£—Ç–∏–ª–∏—Ç—ã
```bash
make test        # –¢–µ—Å—Ç—ã
make health      # Health check
make monitor     # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
make backup      # Backup
make shell       # –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
make clean       # –û—á–∏—Å—Ç–∫–∞
make rebuild     # –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞
```

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

1. **`DOCKER_GUIDE.md`** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (300+ —Å—Ç—Ä–æ–∫)
2. **`README.md`** - –û–±–Ω–æ–≤–ª–µ–Ω —Å Docker –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
3. **`.env.example`** - 98 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ** - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è

---

## üéØ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö PRODUCTION

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤:
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∏–∑–æ–ª—è—Ü–∏—è
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - health check, –º–µ—Ç—Ä–∏–∫–∏, –ª–æ–≥–∏
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫, graceful shutdown
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- **Backup** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è –∏ –ø–æ–¥—Ä–æ–±–Ω–∞—è

### üöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker –∏ Docker Compose
2. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —É @BotFather
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å: `make prod`

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê DOCKER –†–ï–®–ï–ù–ò–Ø

- **Dockerfile —Ñ–∞–π–ª–æ–≤:** 2
- **Docker Compose —Ñ–∞–π–ª–æ–≤:** 2
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:** 4
- **Makefile –∫–æ–º–∞–Ω–¥:** 20+
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:** 98
- **–°—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 500+
- **–†–µ–∂–∏–º–æ–≤ –∑–∞–ø—É—Å–∫–∞:** 4 (normal, dev, prod, test)

---

## üèÜ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è production-ready Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è!**

‚ú® **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ enterprise
- üìä –ü–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏
- üõ†Ô∏è –£–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏
- üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production
- üìö –ò—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üîß –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**–ì–æ—Ç–æ–≤ –∫ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–º—É –¥–µ–ø–ª–æ—é –≤ –ª—é–±–æ–π —Å—Ä–µ–¥–µ!** üê≥üöÄ
